{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-h4 mb-4\"\n}, \"Составить формулу\", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  key: 0,\n  class: \"mt-4\"\n};\nconst _hoisted_3 = {\n  class: \"mt-4\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"p\", null, \" X = количество заказов с данным типом, Y = количество минут, затраченное на заказ \", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  key: 1,\n  class: \"mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_select = _resolveComponent(\"v-select\");\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  return _openBlock(), _createBlock(_component_v_container, {\n    class: \"max-w-md mx-auto p-4 mt-10\"\n  }, {\n    default: _withCtx(() => [_hoisted_1, _createVNode(_component_v_select, {\n      modelValue: $data.selectedProf,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedProf = $event),\n      items: $data.listProf,\n      \"item-text\": \"profession_name\",\n      \"item-value\": \"profession_id\",\n      label: \"Выберите профессию\",\n      outlined: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"items\"]), _createVNode(_component_v_select, {\n      modelValue: $data.selectedType,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.selectedType = $event),\n      items: $data.listTypeOrder,\n      \"item-text\": \"order_type_name\",\n      \"item-value\": \"order_type_id\",\n      label: \"Выберите тип зказа для профессии\",\n      outlined: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"items\"]), _createVNode(_component_v_text_field, {\n      modelValue: $data.CountDay,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.CountDay = $event),\n      label: \"Введите количество дней\",\n      type: \"number\",\n      outlined: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_v_btn, {\n      onClick: $options.learnAverrageTime,\n      color: \"primary\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Среднее время на заказ\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), $data.averageTime ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, \"Среднее время на заказ: \" + _toDisplayString($data.averageTime.average_time), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Количество заказов: \" + _toDisplayString($data.averageTime.order_count), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createVNode(_component_v_text_field, {\n      modelValue: $data.formulValue,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.formulValue = $event),\n      label: \"Введите формулу\",\n      outlined: \"\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _createVNode(_component_v_btn, {\n      onClick: $options.insertFormul,\n      color: \"primary\",\n      class: \"mt-4\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Создать формулу\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), $data.errors ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.errors, (error, key) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: key,\n        class: \"text-red-600\"\n      }, _toDisplayString(error), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createElementVNode","class","key","_createBlock","_component_v_container","default","_withCtx","_hoisted_1","_createVNode","_component_v_select","modelValue","$data","selectedProf","_cache","$event","items","listProf","label","outlined","selectedType","listTypeOrder","_component_v_text_field","CountDay","type","_component_v_btn","onClick","$options","learnAverrageTime","color","_createTextVNode","_","averageTime","_createElementBlock","_hoisted_2","_toDisplayString","average_time","order_count","_createCommentVNode","_hoisted_3","_hoisted_4","formulValue","insertFormul","errors","_hoisted_5","_Fragment","_renderList","error"],"sources":["V:\\web\\shiftfront\\src\\components\\Formuls.vue"],"sourcesContent":["<!--Formuls-->\r\n<template>\r\n  <v-container class=\"max-w-md mx-auto p-4 mt-10\">\r\n    <h1 class=\"text-h4 mb-4\">Составить формулу</h1>\r\n    <v-select\r\n      v-model=\"selectedProf\"\r\n      :items=\"listProf\"\r\n      item-text=\"profession_name\"\r\n      item-value=\"profession_id\"\r\n      label=\"Выберите профессию\"\r\n      outlined\r\n    ></v-select>\r\n    <v-select\r\n      v-model=\"selectedType\"\r\n      :items=\"listTypeOrder\"\r\n      item-text=\"order_type_name\"\r\n      item-value=\"order_type_id\"\r\n      label=\"Выберите тип зказа для профессии\"\r\n      outlined\r\n    ></v-select>\r\n    <v-text-field\r\n      v-model=\"CountDay\"\r\n      label=\"Введите количество дней\"\r\n      type=\"number\"\r\n      outlined\r\n    ></v-text-field>\r\n    <v-btn @click=\"learnAverrageTime\" color=\"primary\"\r\n      >Среднее время на заказ</v-btn\r\n    >\r\n    <div v-if=\"averageTime\" class=\"mt-4\">\r\n      <p>Среднее время на заказ: {{ averageTime.average_time }}</p>\r\n      <p>Количество заказов: {{ averageTime.order_count }}</p>\r\n    </div>\r\n    <div class=\"mt-4\">\r\n      <p>\r\n        X = количество заказов с данным типом, Y = количество минут, затраченное\r\n        на заказ\r\n      </p>\r\n      <v-text-field\r\n        v-model=\"formulValue\"\r\n        label=\"Введите формулу\"\r\n        outlined\r\n      ></v-text-field>\r\n    </div>\r\n    <v-btn @click=\"insertFormul\" color=\"primary\" class=\"mt-4\"\r\n      >Создать формулу</v-btn\r\n    >\r\n    <div v-if=\"errors\" class=\"mt-4\">\r\n      <ul>\r\n        <li v-for=\"(error, key) in errors\" :key=\"key\" class=\"text-red-600\">\r\n          {{ error }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport orderStatistic from \"@/services/data_import\";\r\nexport default {\r\n  name: \"TheFormuls\",\r\n  data() {\r\n    return {\r\n      listTypeOrder: null,\r\n      listProf: null,\r\n      selectedProf: null,\r\n      selectedType: null,\r\n      formulValue: \"\",\r\n      errors: null,\r\n      averageTime: null,\r\n      CountDay: 0,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getOrderTypes();\r\n    this.getProfessions();\r\n  },\r\n  methods: {\r\n    getOrderTypes() {\r\n      orderStatistic\r\n        .getOrderType()\r\n        .then((response) => {\r\n          this.listTypeOrder = response.data;\r\n          console.log(response.data);\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    getProfessions() {\r\n      orderStatistic\r\n        .getProfession()\r\n        .then((response) => {\r\n          this.listProf = response.data;\r\n          console.log(response.data);\r\n        })\r\n        .catch((e) => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    insertFormul() {\r\n      if (!this.selectedProf || !this.formulValue) {\r\n        alert(\"Please select a profession and enter a formula.\");\r\n        return;\r\n      }\r\n      orderStatistic\r\n        .getIdProfession(this.selectedProf)\r\n        .then((response) => {\r\n          let id_prof = response.data;\r\n          id_prof + 1;\r\n          orderStatistic\r\n            .insertFormule(this.selectedProf, this.formulValue)\r\n            .then((response) => {\r\n              console.log(\"Formula created successfully:\", response);\r\n              this.errors = null;\r\n            })\r\n            .catch((error) => {\r\n              if (error.response) {\r\n                this.errors = error.response.data.errors;\r\n                console.error(\"Validation Error:\", error.response.data.errors);\r\n              } else {\r\n                console.error(\"Error:\", error);\r\n              }\r\n            });\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error getting profession ID:\", error);\r\n        });\r\n    },\r\n    learnAverrageTime() {\r\n      orderStatistic\r\n        .getAverTime(this.selectedType, this.CountDay)\r\n        .then((response) => {\r\n          this.averageTime = response.data;\r\n          console.log(\"Formula created successfully:\", response);\r\n          this.errors = null;\r\n        })\r\n        .catch((error) => {\r\n          if (error.response) {\r\n            this.errors = error.response.data.errors;\r\n            console.error(\"Validation Error:\", error.response.data.errors);\r\n          } else {\r\n            console.error(\"Error:\", error);\r\n          }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}